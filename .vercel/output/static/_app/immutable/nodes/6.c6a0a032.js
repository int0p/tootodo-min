import{f as U}from"../chunks/fetch-refresh.dd216df5.js";import{S as W,i as Z,s as ee,J as A,p as S,z as P,y as T,w as E,X as F,l as m,e as v,t as N,d as x,b as H,f as $,g as w,k as V,j as I,h as X,m as b,r as _,q as Y,v as G,x as K,M as L}from"../chunks/index.9f73b2d7.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.b57464ad.js";import"../chunks/Modal.svelte_svelte_type_style_lang.7c9bde1f.js";import"../chunks/moment.a354566a.js";import"../chunks/index.5e2a9a64.js";import"../chunks/chunk-5UWJICAP.5753fd06.js";import"../chunks/paths.cfd798f3.js";import{B as te}from"../chunks/Button.0d438fe4.js";import{C as se}from"../chunks/Card.423691da.js";const le=async({fetch:f,parent:l})=>{const{user:a}=await l(),t=o=>U(f,o),e=t("/spotify/api/spotify/browse/new-releases?limit=6"),i=t("/spotify/api/spotify/browse/featured-playlists?limit=6"),s=t(`/spotify/api/spotify/users/${a==null?void 0:a.id}/playlists?limit=6`),r=await t("/spotify/api/spotify/browse/categories"),n=r.ok?await r.json():void 0,p=n?n.categories.items.sort(()=>.5-Math.random()).slice(0,3):[],j=p.map(o=>t(`spotify/api/spotify/browse/categories/${o.id}/playlists?limit=6`)),[y,k,R,...g]=await Promise.all([e,i,s,...j]);return{newReleases:y.ok?y.json():void 0,featuredPlaylists:k.ok?k.json():void 0,userPlaylists:R.ok?R.json():void 0,homeCategories:p,categoriesPlaylists:Promise.all(g.map(o=>o.ok?o.json():void 0))}},ye=Object.freeze(Object.defineProperty({__proto__:null,load:le},Symbol.toStringTag,{value:"Module"}));function M(f,l,a){const t=f.slice();return t[2]=l[a],t}function q(f,l,a){const t=f.slice();return t[5]=l[a],t}function ae(f){let l,a,t=f[2].title+"",e;return{c(){l=N("See All "),a=v("span"),e=N(t),this.h()},l(i){l=V(i,"See All "),a=$(i,"SPAN",{class:!0});var s=w(a);e=V(s,t),s.forEach(m),this.h()},h(){b(a,"class","visually-hidden")},m(i,s){S(i,l,s),S(i,a,s),_(a,e)},p:L,d(i){i&&m(l),i&&m(a)}}}function z(f){let l,a,t,e;return a=new se({props:{item:f[5]}}),{c(){l=v("div"),H(a.$$.fragment),t=x(),this.h()},l(i){l=$(i,"DIV",{class:!0});var s=w(l);X(a.$$.fragment,s),t=I(s),s.forEach(m),this.h()},h(){b(l,"class","grid-item bg-black text-white")},m(i,s){S(i,l,s),Y(a,l,null),_(l,t),e=!0},p:L,i(i){e||(P(a.$$.fragment,i),e=!0)},o(i){E(a.$$.fragment,i),e=!1},d(i){i&&m(l),K(a)}}}function J(f){let l,a,t,e,i=f[2].title+"",s,r,n,p,j,y,k,R;p=new te({props:{element:"a",href:f[2].path,variant:"outline",$$slots:{default:[ae]},$$scope:{ctx:f}}});let g=f[2].items,o=[];for(let c=0;c<g.length;c+=1)o[c]=z(q(f,g,c));const Q=c=>E(o[c],1,1,()=>{o[c]=null});return{c(){l=v("section"),a=v("div"),t=v("div"),e=v("h2"),s=N(i),r=x(),n=v("div"),H(p.$$.fragment),j=x(),y=v("div");for(let c=0;c<o.length;c+=1)o[c].c();k=x(),this.h()},l(c){l=$(c,"SECTION",{class:!0});var u=w(l);a=$(u,"DIV",{class:!0});var d=w(a);t=$(d,"DIV",{class:!0});var h=w(t);e=$(h,"H2",{class:!0});var C=w(e);s=V(C,i),C.forEach(m),h.forEach(m),r=I(d),n=$(d,"DIV",{class:!0});var B=w(n);X(p.$$.fragment,B),B.forEach(m),d.forEach(m),j=I(u),y=$(u,"DIV",{class:!0});var O=w(y);for(let D=0;D<o.length;D+=1)o[D].l(O);O.forEach(m),k=I(u),u.forEach(m),this.h()},h(){b(e,"class","section-title"),b(t,"class","right"),b(n,"class","left"),b(a,"class","content-row-header flex items-center justify-between svelte-y1tbxb"),b(y,"class","grid-items"),b(l,"class","content-row svelte-y1tbxb")},m(c,u){S(c,l,u),_(l,a),_(a,t),_(t,e),_(e,s),_(a,r),_(a,n),Y(p,n,null),_(l,j),_(l,y);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(y,null);_(l,k),R=!0},p(c,u){const d={};if(u&256&&(d.$$scope={dirty:u,ctx:c}),p.$set(d),u&1){g=c[2].items;let h;for(h=0;h<g.length;h+=1){const C=q(c,g,h);o[h]?(o[h].p(C,u),P(o[h],1)):(o[h]=z(C),o[h].c(),P(o[h],1),o[h].m(y,null))}for(G(),h=g.length;h<o.length;h+=1)Q(h);T()}},i(c){if(!R){P(p.$$.fragment,c);for(let u=0;u<g.length;u+=1)P(o[u]);R=!0}},o(c){E(p.$$.fragment,c),o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)E(o[u]);R=!1},d(c){c&&m(l),K(p),F(o,c)}}}function ie(f){let l,a,t=f[0],e=[];for(let s=0;s<t.length;s+=1)e[s]=J(M(f,t,s));const i=s=>E(e[s],1,1,()=>{e[s]=null});return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=A()},l(s){for(let r=0;r<e.length;r+=1)e[r].l(s);l=A()},m(s,r){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(s,r);S(s,l,r),a=!0},p(s,[r]){if(r&1){t=s[0];let n;for(n=0;n<t.length;n+=1){const p=M(s,t,n);e[n]?(e[n].p(p,r),P(e[n],1)):(e[n]=J(p),e[n].c(),P(e[n],1),e[n].m(l.parentNode,l))}for(G(),n=t.length;n<e.length;n+=1)i(n);T()}},i(s){if(!a){for(let r=0;r<t.length;r+=1)P(e[r]);a=!0}},o(s){e=e.filter(Boolean);for(let r=0;r<e.length;r+=1)E(e[r]);a=!1},d(s){F(e,s),s&&m(l)}}}function oe(f,l,a){let{data:t}=l,e=[];return f.$$set=i=>{"data"in i&&a(1,t=i.data)},f.$$.update=()=>{f.$$.dirty&2&&(t.newReleases&&e.push({title:"New Releases",path:"/spotify/section/new-releases",items:t.newReleases.albums.items}),t.featuredPlaylists&&e.push({title:"Featured Playlists",path:"/spotify/section/featured-playlists",items:t.featuredPlaylists.playlists.items}),t.homeCategories.forEach((i,s)=>{const r=t.categoriesPlaylists[s];r&&e.push({title:i.name,path:`/spotify/category/${i.id}`,items:r.playlists.items})}),t.userPlaylists&&e.push({title:"Your Playlists",path:"/spotify/playlists",items:t.userPlaylists.items}))},[e,t]}class ge extends W{constructor(l){super(),Z(this,l,oe,ie,ee,{data:1})}}export{ge as component,ye as universal};
