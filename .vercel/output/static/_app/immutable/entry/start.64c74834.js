import{a2 as Ne,a8 as ye}from"../chunks/index.62fc0439.js";import{S as Be,b as Ge,I as M,g as qe,f as Me,d as _e,e as fe,s as H,h as ee,i as ve,P as Ve,j as Ze}from"../chunks/singletons.3a082244.js";import{b as J}from"../chunks/paths.079c38ab.js";import{R as Fe,H as te}from"../chunks/control.f5b05b5f.js";import{u as et}from"../chunks/parse.bee59afc.js";function tt(a,i){return a==="/"||i==="ignore"?a:i==="never"?a.endsWith("/")?a.slice(0,-1):a:i==="always"&&!a.endsWith("/")?a+"/":a}function nt(a){return a.split("%25").map(decodeURI).join("%25")}function at(a){for(const i in a)a[i]=decodeURIComponent(a[i]);return a}const rt=["href","pathname","search","searchParams","toString","toJSON"];function ot(a,i){const f=new URL(a);for(const l of rt)Object.defineProperty(f,l,{get(){return i(),a[l]},enumerable:!0,configurable:!0});return it(f),f}function it(a){Object.defineProperty(a,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const st="/__data.json";function lt(a){return a.replace(/\/$/,"")+st}function We(a){try{return JSON.parse(sessionStorage[a])}catch{}}function He(a,i){const f=JSON.stringify(i);try{sessionStorage[a]=f}catch{}}function ct(...a){let i=5381;for(const f of a)if(typeof f=="string"){let l=f.length;for(;l;)i=i*33^f.charCodeAt(--l)}else if(ArrayBuffer.isView(f)){const l=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);let m=l.length;for(;m;)i=i*33^l[--m]}else throw new TypeError("value must be a string or TypedArray");return(i>>>0).toString(36)}const ue=window.fetch;window.fetch=(a,i)=>((a instanceof Request?a.method:(i==null?void 0:i.method)||"GET")!=="GET"&&ne.delete(Re(a)),ue(a,i));const ne=new Map;function ft(a,i){const f=Re(a,i),l=document.querySelector(f);if(l!=null&&l.textContent){const{body:m,...w}=JSON.parse(l.textContent),k=l.getAttribute("data-ttl");return k&&ne.set(f,{body:m,init:w,ttl:1e3*Number(k)}),Promise.resolve(new Response(m,w))}return ue(a,i)}function ut(a,i,f){if(ne.size>0){const l=Re(a,f),m=ne.get(l);if(m){if(performance.now()<m.ttl&&["default","force-cache","only-if-cached",void 0].includes(f==null?void 0:f.cache))return new Response(m.body,m.init);ne.delete(l)}}return ue(i,f)}function Re(a,i){let l=`script[data-sveltekit-fetched][data-url=${JSON.stringify(a instanceof Request?a.url:a)}]`;if(i!=null&&i.headers||i!=null&&i.body){const m=[];i.headers&&m.push([...new Headers(i.headers)].join(",")),i.body&&(typeof i.body=="string"||ArrayBuffer.isView(i.body))&&m.push(i.body),l+=`[data-hash="${ct(...m)}"]`}return l}const dt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function pt(a){const i=[];return{pattern:a==="/"?/^\/$/:new RegExp(`^${mt(a).map(l=>{const m=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(l);if(m)return i.push({name:m[1],matcher:m[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const w=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(l);if(w)return i.push({name:w[1],matcher:w[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!l)return;const k=l.split(/\[(.+?)\](?!\])/);return"/"+k.map((b,E)=>{if(E%2){if(b.startsWith("x+"))return be(String.fromCharCode(parseInt(b.slice(2),16)));if(b.startsWith("u+"))return be(String.fromCharCode(...b.slice(2).split("-").map(U=>parseInt(U,16))));const h=dt.exec(b);if(!h)throw new Error(`Invalid param: ${b}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,N,D,C,O]=h;return i.push({name:C,matcher:O,optional:!!N,rest:!!D,chained:D?E===1&&k[0]==="":!1}),D?"(.*?)":N?"([^/]*)?":"([^/]+?)"}return be(b)}).join("")}).join("")}/?$`),params:i}}function ht(a){return!/^\([^)]+\)$/.test(a)}function mt(a){return a.slice(1).split("/").filter(ht)}function gt(a,i,f){const l={},m=a.slice(1);let w=0;for(let k=0;k<i.length;k+=1){const y=i[k];let b=m[k-w];if(y.chained&&y.rest&&w&&(b=m.slice(k-w,k+1).filter(E=>E).join("/"),w=0),b===void 0){y.rest&&(l[y.name]="");continue}if(!y.matcher||f[y.matcher](b)){l[y.name]=b;const E=i[k+1],h=m[k+1];E&&!E.rest&&E.optional&&h&&y.chained&&(w=0);continue}if(y.optional&&y.chained){w++;continue}return}if(!w)return l}function be(a){return a.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function wt({nodes:a,server_loads:i,dictionary:f,matchers:l}){const m=new Set(i);return Object.entries(f).map(([y,[b,E,h]])=>{const{pattern:N,params:D}=pt(y),C={id:y,exec:O=>{const U=N.exec(O);if(U)return gt(U,D,l)},errors:[1,...h||[]].map(O=>a[O]),layouts:[0,...E||[]].map(k),leaf:w(b)};return C.errors.length=C.layouts.length=Math.max(C.errors.length,C.layouts.length),C});function w(y){const b=y<0;return b&&(y=~y),[b,a[y]]}function k(y){return y===void 0?y:[m.has(y),a[y]]}}async function yt(a){var i;for(const f in a)if(typeof((i=a[f])==null?void 0:i.then)=="function")return Object.fromEntries(await Promise.all(Object.entries(a).map(async([l,m])=>[l,await m])));return a}const Ye=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...Ye];const _t=new Set([...Ye]);[..._t];function vt(a){return a.filter(i=>i!=null)}const bt="x-sveltekit-invalidated";var ze;const B=(ze=We(Be))!=null?ze:{};var Je;const Z=(Je=We(Ge))!=null?Je:{};function Se(a){B[a]=ee()}function St(a,i){var je;const f=wt(a),l=a.nodes[0],m=a.nodes[1];l(),m();const w=document.documentElement,k=[],y=[];let b=null;const E={before_navigate:[],after_navigate:[]};let h={branch:[],error:null,url:null},N=!1,D=!1,C=!0,O=!1,U=!1,G=!1,K=!1,V,I=(je=history.state)==null?void 0:je[M];I||(I=Date.now(),history.replaceState({...history.state,[M]:I},"",location.href));const de=B[I];de&&(history.scrollRestoration="manual",scrollTo(de.x,de.y));let F,ae,re;async function xe(){re=re||Promise.resolve(),await re,re=null;const e=new URL(location.href),t=X(e,!0);b=null;const r=ae={},n=t&&await me(t);if(r===ae&&n){if(n.type==="redirect")return oe(new URL(n.location,e).href,{},[e.pathname],r);n.props.page!==void 0&&(F=n.props.page),V.$set(n.props)}}function ke(e){y.some(t=>t==null?void 0:t.snapshot)&&(Z[e]=y.map(t=>{var r;return(r=t==null?void 0:t.snapshot)==null?void 0:r.capture()}))}function Le(e){var t;(t=Z[e])==null||t.forEach((r,n)=>{var s,o;(o=(s=y[n])==null?void 0:s.snapshot)==null||o.restore(r)})}function Ae(){Se(I),He(Be,B),ke(I),He(Ge,Z)}async function oe(e,{noScroll:t=!1,replaceState:r=!1,keepFocus:n=!1,state:s={},invalidateAll:o=!1},c,d){return typeof e=="string"&&(e=new URL(e,qe(document))),ce({url:e,scroll:t?ee():null,keepfocus:n,redirect_chain:c,details:{state:s,replaceState:r},nav_token:d,accepted:()=>{o&&(K=!0)},blocked:()=>{},type:"goto"})}async function Pe(e){return b={id:e.id,promise:me(e).then(t=>(t.type==="loaded"&&t.state.error&&(b=null),t))},b.promise}async function ie(...e){const r=f.filter(n=>e.some(s=>n.exec(s))).map(n=>Promise.all([...n.layouts,n.leaf].map(s=>s==null?void 0:s[1]())));await Promise.all(r)}function Ue(e){var n,s;h=e.state;const t=document.querySelector("style[data-sveltekit]");t&&t.remove(),F=e.props.page,V=new a.root({target:i,props:{...e.props,stores:H,components:y},hydrate:!0}),Le(I);const r={from:null,to:{params:h.params,route:{id:(s=(n=h.route)==null?void 0:n.id)!=null?s:null},url:new URL(location.href)},willUnload:!1,type:"enter"};E.after_navigate.forEach(o=>o(r)),D=!0}async function Y({url:e,params:t,branch:r,status:n,error:s,route:o,form:c}){var g;let d="never";for(const R of r)(R==null?void 0:R.slash)!==void 0&&(d=R.slash);e.pathname=tt(e.pathname,d),e.search=e.search;const v={type:"loaded",state:{url:e,params:t,branch:r,error:s,route:o},props:{constructors:vt(r).map(R=>R.node.component)}};c!==void 0&&(v.props.form=c);let p={},_=!F,S=0;for(let R=0;R<Math.max(r.length,h.branch.length);R+=1){const T=r[R],j=h.branch[R];(T==null?void 0:T.data)!==(j==null?void 0:j.data)&&(_=!0),T&&(p={...p,...T.data},_&&(v.props[`data_${S}`]=p),S+=1)}return(!h.url||e.href!==h.url.href||h.error!==s||c!==void 0&&c!==F.form||_)&&(v.props.page={error:s,params:t,route:{id:(g=o==null?void 0:o.id)!=null?g:null},status:n,url:new URL(e),form:c!=null?c:null,data:_?p:F.data}),v}async function pe({loader:e,parent:t,url:r,params:n,route:s,server_data_node:o}){var p,_,S,L,g,R,T;let c=null;const d={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},v=await e();if((p=v.universal)!=null&&p.load){let j=function(...A){for(const u of A){const{href:x}=new URL(u,r);d.dependencies.add(x)}};const q={route:{get id(){return d.route=!0,s.id}},params:new Proxy(n,{get:(A,u)=>(d.params.add(u),A[u])}),data:(_=o==null?void 0:o.data)!=null?_:null,url:ot(r,()=>{d.url=!0}),async fetch(A,u){let x;A instanceof Request?(x=A.url,u={body:A.method==="GET"||A.method==="HEAD"?void 0:await A.blob(),cache:A.cache,credentials:A.credentials,headers:A.headers,integrity:A.integrity,keepalive:A.keepalive,method:A.method,mode:A.mode,redirect:A.redirect,referrer:A.referrer,referrerPolicy:A.referrerPolicy,signal:A.signal,...u}):x=A;const P=new URL(x,r);return j(P.href),P.origin===r.origin&&(x=P.href.slice(r.origin.length)),D?ut(x,P.href,u):ft(x,u)},setHeaders:()=>{},depends:j,parent(){return d.parent=!0,t()}};c=(S=await v.universal.load.call(null,q))!=null?S:null,c=c?await yt(c):null}return{node:v,loader:e,server:o,universal:(L=v.universal)!=null&&L.load?{type:"data",data:c,uses:d}:null,data:(g=c!=null?c:o==null?void 0:o.data)!=null?g:null,slash:(T=(R=v.universal)==null?void 0:R.trailingSlash)!=null?T:o==null?void 0:o.slash}}function Oe(e,t,r,n,s){if(K)return!0;if(!n)return!1;if(n.parent&&e||n.route&&t||n.url&&r)return!0;for(const o of n.params)if(s[o]!==h.params[o])return!0;for(const o of n.dependencies)if(k.some(c=>c(new URL(o))))return!0;return!1}function he(e,t){return(e==null?void 0:e.type)==="data"?e:(e==null?void 0:e.type)==="skip"&&t!=null?t:null}async function me({id:e,invalidating:t,url:r,params:n,route:s}){var A;if((b==null?void 0:b.id)===e)return b.promise;const{errors:o,layouts:c,leaf:d}=s,v=[...c,d];o.forEach(u=>u==null?void 0:u().catch(()=>{})),v.forEach(u=>u==null?void 0:u[1]().catch(()=>{}));let p=null;const _=h.url?e!==h.url.pathname+h.url.search:!1,S=h.route?s.id!==h.route.id:!1;let L=!1;const g=v.map((u,x)=>{var z;const P=h.branch[x],$=!!(u!=null&&u[0])&&((P==null?void 0:P.loader)!==u[1]||Oe(L,S,_,(z=P.server)==null?void 0:z.uses,n));return $&&(L=!0),$});if(g.some(Boolean)){try{p=await Ke(r,g)}catch(u){return se({status:u instanceof te?u.status:500,error:await Q(u,{url:r,params:n,route:{id:s.id}}),url:r,route:s})}if(p.type==="redirect")return p}const R=p==null?void 0:p.nodes;let T=!1;const j=v.map(async(u,x)=>{var ge;if(!u)return;const P=h.branch[x],$=R==null?void 0:R[x];if((!$||$.type==="skip")&&u[1]===(P==null?void 0:P.loader)&&!Oe(T,S,_,(ge=P.universal)==null?void 0:ge.uses,n))return P;if(T=!0,($==null?void 0:$.type)==="error")throw $;return pe({loader:u[1],url:r,params:n,route:s,parent:async()=>{var Te;const De={};for(let we=0;we<x;we+=1)Object.assign(De,(Te=await j[we])==null?void 0:Te.data);return De},server_data_node:he($===void 0&&u[0]?{type:"skip"}:$!=null?$:null,u[0]?P==null?void 0:P.server:void 0)})});for(const u of j)u.catch(()=>{});const q=[];for(let u=0;u<v.length;u+=1)if(v[u])try{q.push(await j[u])}catch(x){if(x instanceof Fe)return{type:"redirect",location:x.location};let P=500,$;if(R!=null&&R.includes(x))P=(A=x.status)!=null?A:P,$=x.error;else if(x instanceof te)P=x.status,$=x.body;else{if(await H.updated.check())return await W(r);$=await Q(x,{params:n,url:r,route:{id:s.id}})}const z=await $e(u,q,o);return z?await Y({url:r,params:n,branch:q.slice(0,z.idx).concat(z.node),status:P,error:$,route:s}):await Ce(r,{id:s.id},$,P)}else q.push(void 0);return await Y({url:r,params:n,branch:q,status:200,error:null,route:s,form:t?void 0:null})}async function $e(e,t,r){for(;e--;)if(r[e]){let n=e;for(;!t[n];)n-=1;try{return{idx:n+1,node:{node:await r[e](),loader:r[e],data:{},server:null,universal:null}}}catch{continue}}}async function se({status:e,error:t,url:r,route:n}){var p;const s={};let o=null;if(a.server_loads[0]===0)try{const _=await Ke(r,[!0]);if(_.type!=="data"||_.nodes[0]&&_.nodes[0].type!=="data")throw 0;o=(p=_.nodes[0])!=null?p:null}catch{(r.origin!==location.origin||r.pathname!==location.pathname||N)&&await W(r)}const d=await pe({loader:l,url:r,params:s,route:n,parent:()=>Promise.resolve({}),server_data_node:he(o)}),v={node:await m(),loader:m,universal:null,server:null,data:null};return await Y({url:r,params:s,branch:[d,v],status:e,error:t,route:null})}function X(e,t){if(ve(e,J))return;const r=le(e);for(const n of f){const s=n.exec(r);if(s)return{id:e.pathname+e.search,invalidating:t,route:n,params:at(s),url:e}}}function le(e){return nt(e.pathname.slice(J.length)||"/")}function Ie({url:e,type:t,intent:r,delta:n}){var d,v,p,_,S;let s=!1;const o={from:{params:h.params,route:{id:(v=(d=h.route)==null?void 0:d.id)!=null?v:null},url:h.url},to:{params:(p=r==null?void 0:r.params)!=null?p:null,route:{id:(S=(_=r==null?void 0:r.route)==null?void 0:_.id)!=null?S:null},url:e},willUnload:!r,type:t};n!==void 0&&(o.delta=n);const c={...o,cancel:()=>{s=!0}};return U||E.before_navigate.forEach(L=>L(c)),s?null:o}async function ce({url:e,scroll:t,keepfocus:r,redirect_chain:n,details:s,type:o,delta:c,nav_token:d={},accepted:v,blocked:p}){var j,q,A;const _=X(e,!1),S=Ie({url:e,type:o,delta:c,intent:_});if(!S){p();return}const L=I;v(),U=!0,D&&H.navigating.set(S),ae=d;let g=_&&await me(_);if(!g){if(ve(e,J))return await W(e);g=await Ce(e,{id:null},await Q(new Error(`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=(_==null?void 0:_.url)||e,ae!==d)return!1;if(g.type==="redirect")if(n.length>10||n.includes(e.pathname))g=await se({status:500,error:await Q(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return oe(new URL(g.location,e).href,{},[...n,e.pathname],d),!1;else((j=g.props.page)==null?void 0:j.status)>=400&&await H.updated.check()&&await W(e);if(k.length=0,K=!1,O=!0,Se(L),ke(L),(q=g.props.page)!=null&&q.url&&g.props.page.url.pathname!==e.pathname&&(e.pathname=(A=g.props.page)==null?void 0:A.url.pathname),s){const u=s.replaceState?0:1;if(s.state[M]=I+=u,history[s.replaceState?"replaceState":"pushState"](s.state,"",e),!s.replaceState){let x=I+1;for(;Z[x]||B[x];)delete Z[x],delete B[x],x+=1}}b=null,D?(h=g.state,g.props.page&&(g.props.page.url=e),V.$set(g.props)):Ue(g);const{activeElement:R}=document;if(await ye(),C){const u=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));t?scrollTo(t.x,t.y):u?u.scrollIntoView():scrollTo(0,0)}const T=document.activeElement!==R&&document.activeElement!==document.body;!r&&!T&&Ee(),C=!0,g.props.page&&(F=g.props.page),U=!1,o==="popstate"&&Le(I),E.after_navigate.forEach(u=>u(S)),H.navigating.set(null),O=!1}async function Ce(e,t,r,n){return e.origin===location.origin&&e.pathname===location.pathname&&!N?await se({status:n,error:r,url:e,route:t}):await W(e)}function W(e){return location.href=e.href,new Promise(()=>{})}function Qe(){let e;w.addEventListener("mousemove",o=>{const c=o.target;clearTimeout(e),e=setTimeout(()=>{n(c,2)},20)});function t(o){n(o.composedPath()[0],1)}w.addEventListener("mousedown",t),w.addEventListener("touchstart",t,{passive:!0});const r=new IntersectionObserver(o=>{for(const c of o)c.isIntersecting&&(ie(le(new URL(c.target.href))),r.unobserve(c.target))},{threshold:0});function n(o,c){const d=Me(o,w);if(!d)return;const{url:v,external:p,download:_}=_e(d,J);if(p||_)return;const S=fe(d);if(!S.reload)if(c<=S.preload_data){const L=X(v,!1);L&&Pe(L)}else c<=S.preload_code&&ie(le(v))}function s(){r.disconnect();for(const o of w.querySelectorAll("a")){const{url:c,external:d,download:v}=_e(o,J);if(d||v)continue;const p=fe(o);p.reload||(p.preload_code===Ve.viewport&&r.observe(o),p.preload_code===Ve.eager&&ie(le(c)))}}E.after_navigate.push(s),s()}function Q(e,t){var r;return e instanceof te?e.body:(r=a.hooks.handleError({error:e,event:t}))!=null?r:{message:t.route.id!=null?"Internal Error":"Not Found"}}return{after_navigate:e=>{Ne(()=>(E.after_navigate.push(e),()=>{const t=E.after_navigate.indexOf(e);E.after_navigate.splice(t,1)}))},before_navigate:e=>{Ne(()=>(E.before_navigate.push(e),()=>{const t=E.before_navigate.indexOf(e);E.before_navigate.splice(t,1)}))},disable_scroll_handling:()=>{(O||!D)&&(C=!1)},goto:(e,t={})=>oe(e,t,[]),invalidate:e=>{if(typeof e=="function")k.push(e);else{const{href:t}=new URL(e,location.href);k.push(r=>r.href===t)}return xe()},invalidate_all:()=>(K=!0,xe()),preload_data:async e=>{const t=new URL(e,qe(document)),r=X(t,!1);if(!r)throw new Error(`Attempted to preload a URL that does not belong to this app: ${t}`);await Pe(r)},preload_code:ie,apply_action:async e=>{var t;if(e.type==="error"){const r=new URL(location.href),{branch:n,route:s}=h;if(!s)return;const o=await $e(h.branch.length,n,s.errors);if(o){const c=await Y({url:r,params:h.params,branch:n.slice(0,o.idx).concat(o.node),status:(t=e.status)!=null?t:500,error:e.error,route:s});h=c.state,V.$set(c.props),ye().then(Ee)}}else e.type==="redirect"?oe(e.location,{invalidateAll:!0},[]):(V.$set({form:null,page:{...F,form:e.data,status:e.status}}),await ye(),V.$set({form:e.data}),e.type==="success"&&Ee())},_start_router:()=>{var e;history.scrollRestoration="manual",addEventListener("beforeunload",t=>{var n,s;let r=!1;if(Ae(),!U){const o={from:{params:h.params,route:{id:(s=(n=h.route)==null?void 0:n.id)!=null?s:null},url:h.url},to:null,willUnload:!0,type:"leave",cancel:()=>r=!0};E.before_navigate.forEach(c=>c(o))}r?(t.preventDefault(),t.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ae()}),(e=navigator.connection)!=null&&e.saveData||Qe(),w.addEventListener("click",t=>{var S,L,g;if(t.button||t.which!==1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.defaultPrevented)return;const r=Me(t.composedPath()[0],w);if(!r)return;const{url:n,external:s,target:o,download:c}=_e(r,J);if(!n)return;if(o==="_parent"||o==="_top"){if(window.parent!==window)return}else if(o&&o!=="_self")return;const d=fe(r);if(!(r instanceof SVGAElement)&&n.protocol!==location.protocol&&!(n.protocol==="https:"||n.protocol==="http:")||c)return;if(s||d.reload){Ie({url:n,type:"link"})?U=!0:t.preventDefault();return}const[p,_]=n.href.split("#");if(_!==void 0&&p===location.href.split("#")[0]){if(h.url.hash===n.hash){t.preventDefault(),(S=r.ownerDocument.getElementById(_))==null||S.scrollIntoView();return}if(G=!0,Se(I),h.url=n,H.page.set({...F,url:n}),H.page.notify(),!d.replace_state)return;G=!1,t.preventDefault()}ce({url:n,scroll:d.noscroll?ee():null,keepfocus:(L=d.keep_focus)!=null?L:!1,redirect_chain:[],details:{state:{},replaceState:(g=d.replace_state)!=null?g:n.href===location.href},accepted:()=>t.preventDefault(),blocked:()=>t.preventDefault(),type:"link"})}),w.addEventListener("submit",t=>{var g;if(t.defaultPrevented)return;const r=HTMLFormElement.prototype.cloneNode.call(t.target),n=t.submitter;if(((n==null?void 0:n.formMethod)||r.method)!=="get")return;const o=new URL((n==null?void 0:n.hasAttribute("formaction"))&&(n==null?void 0:n.formAction)||r.action);if(ve(o,J))return;const c=t.target,{keep_focus:d,noscroll:v,reload:p,replace_state:_}=fe(c);if(p)return;t.preventDefault(),t.stopPropagation();const S=new FormData(c),L=n==null?void 0:n.getAttribute("name");L&&S.append(L,(g=n==null?void 0:n.getAttribute("value"))!=null?g:""),o.search=new URLSearchParams(S).toString(),ce({url:o,scroll:v?ee():null,keepfocus:d!=null?d:!1,redirect_chain:[],details:{state:{},replaceState:_!=null?_:o.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",async t=>{var r;if((r=t.state)!=null&&r[M]){if(t.state[M]===I)return;const n=B[t.state[M]];if(h.url.href.split("#")[0]===location.href.split("#")[0]){B[I]=ee(),I=t.state[M],scrollTo(n.x,n.y);return}const s=t.state[M]-I;await ce({url:new URL(location.href),scroll:n,keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{I=t.state[M]},blocked:()=>{history.go(-s)},type:"popstate",delta:s})}}),addEventListener("hashchange",()=>{G&&(G=!1,history.replaceState({...history.state,[M]:++I},"",location.href))});for(const t of document.querySelectorAll("link"))t.rel==="icon"&&(t.href=t.href);addEventListener("pageshow",t=>{t.persisted&&H.navigating.set(null)})},_hydrate:async({status:e=200,error:t,node_ids:r,params:n,route:s,data:o,form:c})=>{N=!0;const d=new URL(location.href);({params:n={},route:s={id:null}}=X(d,!1)||{});let v;try{const p=r.map(async(L,g)=>{const R=o[g];return R!=null&&R.uses&&(R.uses=Xe(R.uses)),pe({loader:a.nodes[L],url:d,params:n,route:s,parent:async()=>{const T={};for(let j=0;j<g;j+=1)Object.assign(T,(await p[j]).data);return T},server_data_node:he(R)})}),_=await Promise.all(p),S=f.find(({id:L})=>L===s.id);if(S){const L=S.layouts;for(let g=0;g<L.length;g++)L[g]||_.splice(g,0,void 0)}v=await Y({url:d,params:n,branch:_,status:e,error:t,form:c,route:S!=null?S:null})}catch(p){if(p instanceof Fe){await W(new URL(p.location,location.href));return}v=await se({status:p instanceof te?p.status:500,error:await Q(p,{url:d,params:n,route:s}),url:d,route:s})}Ue(v)}}}async function Ke(a,i){const f=new URL(a);f.pathname=lt(a.pathname),f.searchParams.append(bt,i.map(m=>m?"1":"0").join(""));const l=await ue(f.href);if(!l.ok)throw new te(l.status,await l.json());return new Promise(async m=>{var h;const w=new Map,k=l.body.getReader(),y=new TextDecoder;function b(N){return et(N,{Promise:D=>new Promise((C,O)=>{w.set(D,{fulfil:C,reject:O})})})}let E="";for(;;){const{done:N,value:D}=await k.read();if(N&&!E)break;for(E+=!D&&E?`
`:y.decode(D);;){const C=E.indexOf(`
`);if(C===-1)break;const O=JSON.parse(E.slice(0,C));if(E=E.slice(C+1),O.type==="redirect")return m(O);if(O.type==="data")(h=O.nodes)==null||h.forEach(U=>{(U==null?void 0:U.type)==="data"&&(U.uses=Xe(U.uses),U.data=b(U.data))}),m(O);else if(O.type==="chunk"){const{id:U,data:G,error:K}=O,V=w.get(U);w.delete(U),K?V.reject(b(K)):V.fulfil(b(G))}}}})}function Xe(a){var i,f;return{dependencies:new Set((i=a==null?void 0:a.dependencies)!=null?i:[]),params:new Set((f=a==null?void 0:a.params)!=null?f:[]),parent:!!(a!=null&&a.parent),route:!!(a!=null&&a.route),url:!!(a!=null&&a.url)}}function Ee(){const a=document.querySelector("[autofocus]");if(a)a.focus();else{const i=document.body,f=i.getAttribute("tabindex");i.tabIndex=-1,i.focus({preventScroll:!0,focusVisible:!1}),f!==null?i.setAttribute("tabindex",f):i.removeAttribute("tabindex");const l=getSelection();if(l&&l.type!=="None"){const m=[];for(let w=0;w<l.rangeCount;w+=1)m.push(l.getRangeAt(w));setTimeout(()=>{if(l.rangeCount===m.length){for(let w=0;w<l.rangeCount;w+=1){const k=m[w],y=l.getRangeAt(w);if(k.commonAncestorContainer!==y.commonAncestorContainer||k.startContainer!==y.startContainer||k.endContainer!==y.endContainer||k.startOffset!==y.startOffset||k.endOffset!==y.endOffset)return}l.removeAllRanges()}})}}}async function At(a,i,f){const l=St(a,i);Ze({client:l}),f?await l._hydrate(f):l.goto(location.href,{replaceState:!0}),l._start_router()}export{At as start};
